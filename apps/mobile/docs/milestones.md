# マイルストーン & ゲート（実機レビュー前提）

## 共通ルール
- 1マイルストーン = “動く縦スライス” 1つだけ
- 実機レビューでOKが出たら次へ
- 変更は小さく（目安：差分300行以内）
- docs/spec.md は唯一の正。変更が必要なら「提案のみ」して実装は止める

---

## M0: Bootstrap
### スコープ
- Expo起動
- 画面遷移（Home/Question/Result/Settings）だけ用意（中身はダミー可）
- READMEに起動手順

### AC（受け入れ基準）
- iPhone実機で起動できる
- 4画面を行き来できる
- クラッシュしない

### 手動テスト（実機）
- 起動 → Home → Question → Result → Settings → Home
- 連打しても落ちない

---

## M1: Question UI（ロジックはダミー）
### スコープ
- Question画面に質問カードと5択ボタン
- 進捗表示（例：3/12）
- 戻る / 中断（Homeへ戻る）
- 12問でResultへ（Top3は固定でもOK）

### AC
- 操作テンポが良い（1問1秒で答えられる）
- 戻る/中断が破綻しない
- 連打しても落ちない

### 手動テスト
- YES連打で最後まで到達
- UNKNOWN連打で最後まで到達
- 途中で戻る/中断して再開

---

## M2: core/engine 導入（小さなデータでOK）
### スコープ
- ジャンル20件・質問30件のseedを用意
- 回答でTop3が変わる
- 次の質問がロジックで選ばれる
- core/engine のユニットテスト追加（更新と質問選定）

### AC
- 回答に応じてTop3が変化する
- 同じ質問が繰り返されない
- テストが通る

### 手動テスト
- 2パターン（こってり系/さっぱり系）で結果が変わる

---

## M3: データ拡張（網羅へ）
### スコープ
- ジャンル150〜300
- 質問120〜250
- グループ連発の抑制

### AC
- 質問が破綻しない（同義連打しない）
- 結果に納得感が出る

### 手動テスト
- 5回プレイして、結果が偏りすぎないか確認

---

## M4: 近くで探す（マップディープリンク）
### スコープ
- 結果の各ジャンルに「近くで探す」
- 位置情報許可があれば座標付きで検索、拒否でも検索できる

### AC
- iPhone実機で検索が必ず開く
- 位置拒否でも落ちない

---

## M5: 学習（SQLite）
### スコープ
- 「これにする」で stats +1
- リセット（初期化）
- 簡易履歴（任意）

### AC
- 次回以降の結果が少しずつ寄る（極端に固定化しない）
- リセットでseedに戻る
